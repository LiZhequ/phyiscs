webpackJsonp([7],{104:function(t,e){},115:function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.question?t._e():s("loading"),t._v(" "),t.question?s("div",{staticClass:"main"},[s("Breadcrumb",[t.question&&t.question.part?s("BreadcrumbItem",{attrs:{to:"/askClass/part/"+t.question.part}},[t._v(t._s(t.question.part))]):t._e(),t._v(" "),t.question&&t.question.chapter?s("BreadcrumbItem",{attrs:{to:"/askClass/chapter/"+t.question.chapter}},[t._v(t._s(t.question.chapter))]):t._e(),t._v(" "),t.question&&t.question.section?s("BreadcrumbItem",{attrs:{to:"/askClass/section/"+t.question.section}},[t._v(t._s(t.question.section))]):t._e(),t._v(" "),t.question&&t.question.point?s("BreadcrumbItem",{attrs:{to:"/askClass/point/"+t.question.point}},[t._v(t._s(t.question.point))]):t._e()],1),t._v(" "),s("h1",{staticClass:"title"},[t._v(t._s(t.question.question))]),t._v(" "),s("div",[s("router-link",{staticClass:"poster",attrs:{to:"/user/user/"+t.question.poster_id}},[t._v(t._s(t.question.poster))]),t._v(" "),s("span",{staticClass:"post-time"},[t._v(t._s(t.time(t.question.post_time))+"提问")])],1),t._v(" "),s("div",{staticClass:"question-content clearfix"},[s("div",{staticClass:"finish",class:{unfinish:t.isUnFin}},[t._v(t._s(t.finish[t.question.finished]))]),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.showQue,expression:"showQue"}]},[t._v(t._s(t.question.question_content))]),t._v(" "),t.isQuePoster?s("a",{directives:[{name:"show",rawName:"v-show",value:t.showQue,expression:"showQue"}],staticClass:"modify",on:{click:t.toggleModQue}},[t._v("修改")]):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showQue,expression:"!showQue"}]},[s("Input",{staticClass:"modifyQue",attrs:{type:"textarea",autosize:{minRows:2,maxRows:15}},model:{value:t.question_content,callback:function(e){t.question_content=e},expression:"question_content"}}),t._v(" "),s("Button",{staticClass:"queBtn",attrs:{type:"primary",loading:t.queLoading},on:{click:t.modifyQue}},[t.queLoading?s("span",[t._v("Loading...")]):s("span",[t._v("提交")])]),t._v(" "),s("Button",{staticClass:"queBtn",attrs:{type:"primary"},on:{click:t.cancelQue}},[t._v("取消")])],1)]),t._v(" "),s("div",{staticClass:"answer-list",attrs:{id:"answer"}},[s("h2",[t._v(t._s(t.question.daan_num)+"个回答")]),t._v(" "),t._l(t.question.answer,function(e){return s("div",{staticClass:"answer clearfix"},["1"===e.accept?s("div",{staticClass:"accepted"},[s("Icon",{attrs:{type:"checkmark-circled"}}),s("span",[t._v("已采纳")])],1):t._e(),t._v(" "),s("p",{directives:[{name:"show",rawName:"v-show",value:t.showAns||e.answer_id!==t.currentAnsId,expression:"showAns || item.answer_id !== currentAnsId"}]},[t._v(t._s(e.content))]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showAns&&e.answer_id===t.currentAnsId,expression:"!showAns && item.answer_id === currentAnsId"}]},[s("Input",{staticClass:"modify-ans",attrs:{type:"textarea",autosize:{minRows:2,maxRows:15}},model:{value:t.modifyAnsContent,callback:function(e){t.modifyAnsContent=e},expression:"modifyAnsContent"}}),t._v(" "),s("Button",{staticClass:"ansBtn",attrs:{type:"primary",loading:t.ansLoading},on:{click:t.modifyAns}},[t.ansLoading?s("span",[t._v("Loading...")]):s("span",[t._v("提交")])]),t._v(" "),s("Button",{staticClass:"ansBtn",attrs:{type:"primary"},on:{click:t.cancelAns}},[t._v("取消")])],1),t._v(" "),s("div",{staticClass:"answer-user"},[s("router-link",{attrs:{to:"/user/user/"+e.poster_id}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image,expression:"item.image"}],staticClass:"poster-avatar",attrs:{src:"",alt:"avatar"}})]),t._v(" "),s("router-link",{staticClass:"answer-poster",attrs:{to:"/user/user/"+e.poster_id,title:e.poster}},[t._v(t._s(e.poster))])],1),t._v(" "),s("div",[s("span",{staticClass:"answer-time"},[t._v(t._s(t.time(e.post_time))+"回答")]),t._v(" "),t.token&&t.user_id===e.poster_id?s("a",{directives:[{name:"show",rawName:"v-show",value:t.showAns,expression:"showAns"}],staticClass:"modify",on:{click:function(s){t.toggleModAns(e.answer_id)}}},[t._v("修改")]):t._e(),t._v(" "),t.isQuePoster?s("a",{directives:[{name:"show",rawName:"v-show",value:"0"===t.question.finished&&!t.showAccept,expression:"question.finished==='0'&&!showAccept"}],staticClass:"accept-ans",on:{click:function(s){t.toggleAccept(e.answer_id)}}},[t._v("采纳")]):t._e()]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showAccept&&t.currentAcceptId===e.answer_id,expression:"showAccept&&currentAcceptId ===item.answer_id"}]},[s("Rate",{model:{value:t.acceptScore,callback:function(e){t.acceptScore=e},expression:"acceptScore"}}),t._v(" "),s("Input",{staticClass:"accept-input",attrs:{type:"textarea",autosize:{minRows:2,maxRows:15}},model:{value:t.acceptContent,callback:function(e){t.acceptContent=e},expression:"acceptContent"}}),t._v(" "),s("Button",{staticClass:"acceptBtn",attrs:{type:"primary",loading:t.acceptLoading},on:{click:t.postAccept}},[t.acceptLoading?s("span",[t._v("Loading...")]):s("span",[t._v("提交")])]),t._v(" "),s("Button",{staticClass:"acceptBtn",attrs:{type:"primary"},on:{click:t.cancelAccept}},[t._v("取消")])],1),t._v(" "),"1"===e.accept?s("div",{staticClass:"comment"},[s("p",[t._v("提问者评价："),s("Rate",{attrs:{disabled:""},model:{value:t.question.star,callback:function(e){t.$set(t.question,"star",e)},expression:"question.star"}})],1),t._v(" "),s("p",[t._v(t._s(t.question.comment))])]):t._e()])})],2),t._v(" "),s("div",{staticClass:"post-ans"},[s("h2",[t._v("撰写答案")]),t._v(" "),s("Input",{staticClass:"post-ans-input",attrs:{type:"textarea",autosize:{minRows:2,maxRows:15}},model:{value:t.answer,callback:function(e){t.answer=e},expression:"answer"}}),t._v(" "),s("Button",{attrs:{type:"primary",loading:t.postAnsLoading},on:{click:t.postAnswer}},[t._v("提交")])],1)],1):t._e()],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},74:function(t,e,s){s(104);var n=s(11)(s(91),s(115),"data-v-d29bc858",null);n.options.__file="C:\\Users\\Lee\\Desktop\\srp\\srp2017\\question-and-answer\\src\\views\\question.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] question.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},76:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},77:function(t,e){},78:function(t,e,s){s(77);var n=s(11)(s(76),s(79),"data-v-2098a2be",null);n.options.__file="C:\\Users\\Lee\\Desktop\\srp\\srp2017\\question-and-answer\\src\\views\\loading.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] loading.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},79:function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loading"},[s("span"),t._v(" "),s("span"),t._v(" "),s("span"),t._v(" "),s("span"),t._v(" "),s("span")])}]},t.exports.render._withStripped=!0},91:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(1),o=s(78),i=s.n(o);e.default={data:function(){return{answer:"",modifyContent:"",modifyAnsContent:"",rawAns:"",currentAcceptId:"",acceptContent:"",acceptScore:0,finish:["未解决","已解决"],queLoading:!1,ansLoading:!1,postAnsLoading:!1,acceptLoading:!1,showQue:!0,showAns:!0,currentAnsId:void 0,showAccept:!1}},computed:{isQuePoster:function(){return this.token&&this.user_id===this.question.poster_id},token:function(){return this.$store.state.user.token},user_id:function(){return this.$store.state.user.user_id},question:function(){return this.$store.state.data.question},isUnFin:function(){return"0"===this.question.finished},question_content:{get:function(){return this.question.question_content},set:function(t){this.modifyContent=t}}},watch:{$route:function(t,e){this.getStatus()}},methods:{cancelAccept:function(){this.acceptContent="",this.acceptScore=0,this.showAccept=!1},cancelAns:function(){this.showAns=!0},cancelQue:function(){this.showQue=!0,this.modifyContent=""},postAccept:function(){var t=this;if(!this.acceptContent||!this.acceptScore)return this.$Message.warning({content:"请填写评分和评价",duration:2,closable:!0});this.acceptLoading=!0,this.$store.dispatch("postAction",{url:"/ask/setBest",data:{answer_id:this.currentAcceptId,answer_comment:this.acceptContent,star_num:this.acceptScore}}).then(function(e){void 0===e&&(t.$Message.success({content:"评价成功",duration:2,closable:!0}),t.acceptContent="",t.acceptScore=0,t.showAccept=!1,t.getStatus())}).finally(function(){return t.acceptLoading=!1})},modifyAns:function(){var t=this;if(this.rawAns===this.modifyAnsContent)return void(this.showAns=!0);this.ansLoading=!0,this.$store.dispatch("postAction",{url:"/ask/amendAnswer",data:{answer_id:this.currentAnsId,content:this.modifyAnsContent}}).then(function(e){void 0===e&&(t.$Message.success({content:"修改回答成功",duration:2,closable:!0}),t.showAns=!0,t.getStatus())}).finally(function(){return t.ansLoading=!1})},modifyQue:function(){var t=this;if(!this.modifyContent||this.modifyContent===this.question_content)return void(this.showQue=!0);this.queLoading=!0,this.$store.dispatch("postAction",{url:"/ask/amendQuestion",data:{question_id:this.$route.params.id,question_content:this.modifyContent}}).then(function(e){void 0===e&&(t.$Message.success({content:"修改问题成功",duration:2,closable:!0}),t.showQue=!0,t.modifyContent="",t.getStatus())}).finally(function(){return t.queLoading=!1})},toggleModAns:function(t){var e=!0,s=!1,n=void 0;try{for(var o,i=this.question.answer[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var a=o.value;if(a.answer_id===t){this.modifyAnsContent=a.content,this.rawAns=a.content;break}}}catch(t){s=!0,n=t}finally{try{!e&&i.return&&i.return()}finally{if(s)throw n}}this.currentAnsId=t,this.showAns=!1},toggleModQue:function(){this.showQue=!1},toggleAccept:function(t){this.currentAcceptId=t,this.showAccept=!0},time:function(t){var e=t.split(" "),s=e[0].split("-");return s[0]+"年"+s[1]+"月"+s[2]+"日"},getStatus:function(){this.$store.commit(n.t,"question"),this.$store.dispatch("getQuestion",{url:"/ask/question",params:{question_id:parseInt(this.$route.params.id)}})},postAnswer:function(){var t=this;if(""===this.answer)return this.$Message.warning({duration:2,content:"请填写回答",closable:!0});this.postAnsLoading=!0,this.$store.dispatch("postAction",{url:"/ask/answer",data:{question_id:parseInt(this.$route.params.id),content:this.answer}}).then(function(e){void 0===e&&(t.$Message.success({content:"提交成功",duration:2,closable:!0}),t.answer="",t.getStatus())}).finally(function(){t.postAnsLoading=!1})}},components:{loading:i.a},beforeRouteEnter:function(t,e,s){s(function(t){t.getStatus()})}}}});